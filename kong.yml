_format_version: "2.1"

services:
  - name: personal_medico
    host: medico_upstream
    protocol: http
    routes:
      - name: personal-medico-internal
        paths:
          - /personal-medico/internal
        strip_path: false

  - name: historia_clinica
    host: historia_clinica_upstream
    protocol: http
    routes:
      - name: historia-clinica-report
        paths:
          - /historia-clinica/api/report
        strip_path: false

upstreams:
  - name: medico_upstream
    targets:
      - target: 10.128.0.84:8080
        weight: 100

  - name: historia_clinica_upstream
    targets:
      - target: 10.128.0.85:8080
        weight: 100
  - name: seguridad_upstream
    targets:
      - target: 10.128.0.86:8080
        weight: 100